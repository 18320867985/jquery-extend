<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta name="Keywords" content="" />
    <meta name="Description" content="" />
    <title>表单验证-vd</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/all.css" />
    <link rel="stylesheet" type="text/css" href="css/icon/iconfont.css" />
    <style>
        .container {
            margin-top: 50px;
            margin-bottom: 50px;
        }

        .container>li+li {
            margin-top: 20px;
        }

        pre {
            margin: 10px 0;
        }

        p {
            margin: 10px;
        }

        .v-modal-2 .v-modal-cnt,
        .v-modal-3 .v-modal-cnt {
            width: 600px;
            padding: 30px;
        }

        h2 {
            margin-bottom: 30px;
        }

        .v-tab {
            margin-top: 30px;
        }

        .v-tab-cnt {
            height: 200px;
            border: 1px solid #ddd;
        }

        .v-tab-cnt-item {
            height: 100%;
            padding: 20px;
            color: #fff;
            font-size: 16px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>标签页-tab</h1>
        <div>
            <a class="btn-link" href="./js/vd.js">查看 vd.js</a>
            <a class="btn-link" href="./component-scss/vd.scss">查看 vd.scss</a>
        </div>

        <form name="form1" class="form1">
            <div class="form-group  vd-box">
                <label for="exampleInputEmail1">收件人</label>

                <input class="form-control vd-item " type="text" name="email"
                    vd-pattern="^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$" vd-pattern-msg="收件人格式不对" value=""
                    placeholder="74646456@qq.com" />
                <span class=" vd-pattern"></span>

            </div>

            <div class="form-group clearfix row vd-box">
                <label class=" col-sm-12" for="exampleInputEmail1">手机:</label>
                <div class=" col-sm-8">

                    <!--vd-remote 1=成功 0=失败 -->
                    <input class="form-control vd-item" type="text" vd-req vd-req-msg="手机号码不能为空" vd-pattern="^1\d{10}$"
                        vd-pattern-msg="手机格式不对" maxlength="11" vd-remote="js/vd.json" vd-remote-msg="手机号码已存在" name="c"
                        placeholder="输入正确手机号码" />
                </div>
                <div class="col-sm-4">
                    <span class="vd-dep-btn  btn btn-default">发送验证码</span>
                </div>

                <div class="col-sm-12">
                    <span class="vd-req "></span>
                    <span class="vd-pattern"> </span>
                    <span class="vd-remote"> </span>
                </div>



            </div>

            <div class="form-group  vd-box">
                <label for="">验证码:</label>

                <input class="form-control vd-item" type="text" vd-req vd-req-msg="验证码不能为空" vd-remote="js/vd.json"
                    vd-remote-length="6" vd-remote-msg="验证码不对" name="yzm" maxlength="6" value="" placeholder="输入验证码" />

                <span class="vd-req "></span>

                <span class="vd-remote"></span>

            </div>

            <div class="form-group  vd-box">
                <label class="a" for="">密码:</label>

                <input class="form-control vd-item" type="text" name="pwd" vd-req vd-req-msg="密码不能为空"
                    vd-compare-emit="pwd2" vd-pattern="^\S{8,32}$" vd-pattern-msg="密码长度8到32位" value=""
                    placeholder="输入密码" />
                <span class="vd-req "></span>
                <span class="vd-pattern "></span>


            </div>

            <div class="form-group  vd-box">
                <label class="a" for="">确认密码:</label>

                <input class="form-control vd-item" type="text" name="pwd2" vd-req vd-req-msg="密码不能为空" vd-compare="pwd"
                    vd-compare-msg="两次密码不相同" value="" placeholder="输入密码" />

                <span class="vd-req "></span>
                <span class="vd-compare"> </span>


            </div>

            <div class="form-group  vd-box">

                <label for="">选择城市:</label>
                <select class="form-control vd-item" name="city" vd-req vd-req-msg="选择城市不能为空">
                    <option value="">==选择城市==</option>
                    <option value="东莞">东莞</option>
                    <option value="深圳">深圳</option>
                    <option value="上海">上海</option>
                </select>

                <span class="vd-req "></span>

            </div>

            <div class="form-group  vd-box">

                <label for="">内容:</label>
                <textarea class="form-control vd-item" name="cont" vd-req vd-req-msg="内容不能为空"
                    placeholder="输入内容"></textarea>

                <span class="vd-req "></span>

            </div>


            <div class="form-group  vd-box">

                <!--复选组框 name="ckgroup"  vd-ck-gp vd-req-msg="爱好不能为空" vd-req -->
                <div class="vd-item" name="ckgroup" vd-ck-gp vd-req-msg="爱好不能为空" vd-req>
                    <label for="">爱好:</label>
                    <label>
                        <input type="checkbox" vd-ck-true="jquery" />
                        jquery
                    </label>

                    <label>
                        <input type="checkbox" vd-ck-true="css3" value="css3" />
                        css3
                    </label>

                    <label>
                        <input type="checkbox" vd-ck-true="html5" value="html5" />
                        html5
                    </label>

                    <label>
                        <input type="checkbox" vd-ck-true="c#" value="c#" />
                        c#
                    </label>

                </div>
                <span class="vd-req "></span>

            </div>

            <div class="form-group  vd-box">

                <!--单选组框  name="sex"  vd-rd-gp   vd-req vd-req-msg="单选组不能为空"  -->
                <div class="vd-item " name="sex" vd-rd-gp vd-req vd-req-msg="单选组不能为空">
                    <label for="">单选:</label>
                    <label><input type="radio" name="sex" value="1" /> 男</label>
                    <label><input type="radio" name="sex" value="0" /> 女</label>

                </div>
                <span class="vd-req"></span>

            </div>


            <div class="checkbox  vd-box">
                <label>
                    <input class="vd-item" name="def" type="checkbox" id="inpu_5" vd-req vd-ck vd-ck-true="1"
                        vd-ck-false="0" v vd-req-msg="没有同意协议">同意协议
                </label>
            </div>
            <button type="button" class="btn btn-primary vd-btn">注册</button>
        </form>

        <pre>
            html:  &lt;form name="form1" class="form1">
                       &lt;div class="form-group  vd-box">

                           &lt;label for="">内容:  &lt;/label>
                           &lt;textarea class="form-control vd-item" name="cont" vd-req vd-req-msg="内容不能为空"
                            placeholder="输入内容">  &lt;/textarea>

                           &lt;!-- 非空提示-->
                           &lt;span class="vd-req">&lt;/span>
                           &lt;!-- 正则验证提示-->
                           &lt;span class="vd-pattern">&lt;/span>
                           &lt;!-- 比较验证提示-->
                           &lt;span class="vd-compare">&lt;/span>
                           &lt;!-- ajax远程验证提示-->
                           &lt;span class="vd-remote">&lt;/span>
                           
                       &lt;/div>
                   &lt;/form>

       </pre>
        <pre>
            html表单内容：
            &lt;form name="form1" class="form1">
                  &lt;div class="form-group  vd-box">
                        &lt;label for="exampleInputEmail1">收件人&lt;/label>
                        &lt;input class="form-control vd-item " type="text" name="email"vd-pattern="^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$" 
                        vd-pattern-msg="收件人格式不对" value=""placeholder="74646456@qq.com" />
                        &lt;span class=" vd-pattern">&lt;/span>
    
                &lt;/div>
    
                &lt;div class="form-group clearfix row vd-box">
                        &lt;label class=" col-sm-12" for="exampleInputEmail1">手机:&lt;/label>
                        &lt;div class=" col-sm-8">
                            &lt;!--vd-remote 1=成功 0=失败 -->
                                &lt;input class="form-control vd-item" type="text" vd-req vd-req-msg="手机号码不能为空"
                                 vd-pattern="^1\d{10}$"vd-pattern-msg="手机格式不对" maxlength="11" vd-remote="js/vd.json" vd-remote-msg="手机号码已存在"
                                  name="c"placeholder="输入正确手机号码" />
                            &lt;/div>
                            &lt;div class="col-sm-4">
                                &lt;span class="vd-dep-btn  btn btn-default">发送验证码&lt;/span>
                            &lt;/div>
        
                        &lt;div class="col-sm-12">
                            &lt;span class="vd-req ">&lt;/span>
                            &lt;span class="vd-pattern"> &lt;/span>
                            &lt;span class="vd-remote"> &lt;/span>
                        &lt;/div>
    
                &lt;/div>
    
                &lt;div class="form-group  vd-box">
                            &lt;label for="">验证码:&lt;/label>
                            &lt;input class="form-control vd-item" type="text" vd-req vd-req-msg="验证码不能为空" vd-remote="js/vd.json"
                            vd-remote-length="6" vd-remote-msg="验证码不对" name="yzm" maxlength="6" value="" placeholder="输入验证码" />
                            &lt;span class="vd-req ">&lt;/span>
                            &lt;span class="vd-remote">&lt;/span>
                &lt;/div>
    
                &lt;div class="form-group  vd-box">
                        &lt;label class="a" for="">密码:&lt;/label>
                        &lt;input class="form-control vd-item" type="text" name="pwd" vd-req vd-req-msg="密码不能为空"
                        vd-compare-emit="pwd2" vd-pattern="^\S{8,32}$" vd-pattern-msg="密码长度8到32位" value=""
                        placeholder="输入密码" />
                        &lt;span class="vd-req ">&lt;/span>
                        &lt;span class="vd-pattern ">&lt;/span>
    
             &lt;/div>
    
             &lt;div class="form-group  vd-box">
                        &lt;label class="a" for="">确认密码:&lt;/label>
                        &lt;input class="form-control vd-item" type="text" name="pwd2" vd-req vd-req-msg="密码不能为空" vd-compare="pwd"
                        vd-compare-msg="两次密码不相同" value="" placeholder="输入密码" />
                        &lt;span class="vd-req ">&lt;/span>
                        &lt;span class="vd-compare"> &lt;/span>
            &lt;/div>
    
            &lt;div class="form-group  vd-box">
                        &lt;label for="">选择城市:&lt;/label>
                        &lt;select class="form-control vd-item" name="city" vd-req vd-req-msg="选择城市不能为空">
                            &lt;option value="">==选择城市==&lt;/option>
                            &lt;option value="东莞">东莞&lt;/option>
                            &lt;option value="深圳">深圳&lt;/option>
                            &lt;option value="上海">上海&lt;/option>
                        &lt;/select>
                        &lt;span class="vd-req ">&lt;/span>
            &lt;/div>
    
            &lt;div class="form-group  vd-box">
                        &lt;label for="">内容:&lt;/label>
                        &lt;textarea class="form-control vd-item" name="cont" vd-req vd-req-msg="内容不能为空"
                        placeholder="输入内容">&lt;/textarea>
                        &lt;span class="vd-req ">&lt;/span>
    
            &lt;/div>
    
            &lt;div class="form-group  vd-box">

                        &lt;!--复选组框 name="ckgroup"  vd-ck-gp vd-req-msg="爱好不能为空" vd-req -->
                        &lt;div class="vd-item" name="ckgroup" vd-ck-gp vd-req-msg="爱好不能为空" vd-req>
                            &lt;label for="">爱好:&lt;/label>
                            &lt;label>
                                &lt;input type="checkbox" vd-ck-true="jquery" />
                                jquery
                            &lt;/label>
                            &lt;label>
                                &lt;input type="checkbox" vd-ck-true="css3" value="css3" />
                                css3
                            &lt;/label>
                            &lt;label>
                                &lt;input type="checkbox" vd-ck-true="html5" value="html5" />
                                html5
                            &lt;/label>
                            &lt;label>
                                &lt;input type="checkbox" vd-ck-true="c#" value="c#" />
                                c#
                            &lt;/label>
                        &lt;/div>
                        &lt;span class="vd-req ">&lt;/span>
            &lt;/div>
    
            &lt;div class="form-group  vd-box">
    
                        &lt;!--单选组框  name="sex"  vd-rd-gp   vd-req vd-req-msg="单选组不能为空"  -->
                        &lt;div class="vd-item " name="sex" vd-rd-gp vd-req vd-req-msg="单选组不能为空">
                            &lt;label for="">单选:&lt;label>
                            &lt;label>&lt;input type="radio" name="sex" value="1" /> 男&lt;/label>
                            &lt;label>&lt;input type="radio" name="sex" value="0" /> 女&lt;/label>
                        &lt;/div>
                        &lt;span class="vd-req">&lt;/span>
             &lt;/div>

                &lt;div class="checkbox  vd-box">
                    &lt;label>
                    &lt;input class="vd-item" name="def" type="checkbox" id="inpu_5" vd-req vd-ck vd-ck-true="1"
                    vd-ck-false="0" v vd-req-msg="没有同意协议">同意协议
                    &lt;/label>
                &lt;/div>

                &lt;button type="button" class="btn btn-primary vd-btn">注册&lt;/button>
             &lt;/form>
        </pre>

        <pre>
        js:
       
    1.初始化表单验证对象
		var vd1=vd.create(".form1");  // 表单的 class的名称
		// 初始化验证对象
		vd1.init();
        //vd1.disabledItem();  //禁用每一项
        //vd1.reset();  //重设表单并清空所以内容和检测验
        //vd.isSubmit=false;  禁用提交按钮
		// 检查验证=>vd1.check(el) 验证当前项; 
		// 验证并显示样式=>vd1.validate(); 
		
	2. 验证每项的父级 大框添加class="vd-box" 的class
        每一个项添加class="vd-item" 和  name 属性作为提交数据对象的属性
        例如name=age，name=sex 对象属性为{age：12,sex:女 }
	  
	3 . 验证类型
	 
	 a.非空验证 => 验证属性： vd-req  
		验证错误提示信息：vd-req-msg="此字段不能为空"
	 
	 b.正则验证 => 验证属性： vd-pattern="^1\d{10}$" 
	   	验证错误提示信息：vd-pattern-msg="此字段格式不对"
	 
	 c.ajax远程验证 => 验证属性： vd-remote="json/remote.json"
	  	长度达到才验证：vd-remote-length="6"  
        验证错误提示信息： vd-remote-msg="验证码不对"
          
        // 远程验证base地址： vd1.baseRemoteUrl="http://sunjin.com";
        // 指定远程验证的方法:vd-remote-method 默认 get ,  例如html: &lt;input vd-remote-method="post"  class="form-control vd-item"/> 
        // 指定远程验证的方法:vd-remote-res 真或假结果判断 默认为真 ,  例如html: &lt;input vd-remote-res="false"  class="form-control vd-item"/> 
        // 指定远程验证的返回对象的属性名称：vd-remote-obj,   例如html: &lt;input vd-remote-obj="data.isCode"  class="form-control vd-item"/>
        // 指定远程验证的发送对象的属性名称: vd-remote-name input的属性name的名称，多个用,分开 
         例如html: &lt;input vd-remote-name="code,phone"  class="form-control vd-item"/> 
         名称转换用code=codeName号 是把code属性转换成发送的ajax对象属性codeName  &lt;input vd-remote-name="code=codeName,phone=tel"  class="form-control vd-item"/>

         远程验证之前的 onremotebefore  $(el).on("onremotebefore",function(event,el){ });
        远程验证之后的 onremoteafter   $(el).on("onremoteafter",function(event,el,data){ });

        // 发送验证码
        $(".vd-dep-btn").click(function () {
            // 根据name属性获取对象
            if (vd1.getObj("c").bl) {
                $.alert("", "已发送验证码");
            };
        });

	 d.比较验证=>  验证属性：  vd-compare="pwd" 
	 	pwd是比较的name="pwd"的字段名称 
	   	 验证错误提示信息：vd-compare-msg="两次密码不能相同"
	 	vd-compare-emit="pwd2"  是比较的字段name="pwd"元素上触发的字段
	 	
	 	
	4 .单选组=>  验证属性： vd-rd-gp  
	 	name="gp"=> 为提交数据的对象属性值 
		vd-req=> 为必填 
		vd-req-msg="单选不能为空"为=> 验证非空提示信息
	 

	5 .checkbox验证=> 验证属性:vd-ck    
		 选中的值：vd-ck-true="1"
	   	没选中的值vd-ck-false="0" 
	   	 属性设为 vd-req =>为必填
	   	验证错误提示信息：vd-req-msg="没有同意协议" 
	
	 
	 
	 6.复选组框=>  验证属性： vd-ck-gp  
	 	name="gp"=> 为提交数据的对象属性值 
		vd-req=> 为必填 
		vd-req-msg="单选不能为空"为=> 验证非空提示信息
	 
	 
	7.提交触发
	$(".vd-btn").on("click", function() {
	
			// 是否验证成功
			vd1.isSuccess(
            // success
            function(obj) {
                //vd1.disabledItem();  //禁用每一项
                //vd1.reset();  //重设表单并清空所以内容和检测验
                //vd.isSubmit=true; 恢复提交按钮
                //$.alert("",JSON.stringify(obj));
            },
            // error
            function(obj) {
            obj.el.focus();
            });	
	});
	 
         </pre>


    </div>


    <script src="js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/mobile/mobile-dom.js" type="text/javascript" charset="utf-8"></script>
    <script src="./js/v-message.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/vd.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/all.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript">
        $(function () {

            // 初始化验证对象
            var vd1 = vd.create(".form1");
            vd1.init();
            //vd1.reset();  //重设表单并清空所以内容和检测验证

            // 检查验证=>vd1.check(el) 验证当前项;
            // 验证并显示样式=>vd1.validate();

            // 点击提交验证
            $(".vd-btn").on("click", function () {

                // 是否验证成功
                vd1.isSuccess(
                    // success
                    function (obj) {
                        setTimeout(function () {
                            vd1.reset();

                            $.alert("", JSON.stringify(obj));

                        }, 3000);

                    },
                    // error
                    function (obj) {

                        obj.el.focus();
                        console.log(obj)

                    });
            });

            // 发送验证码
            $(".vd-dep-btn").click(function () {

                // 根据name属性获取对象
                if (vd1.getObj("c").bl) {

                    $.alert("", "已发送验证码");
                };

            });

            // remote 验证验证之前触发
            $(document).on("onremotebefore", function (e, el) {
                console.log("onremotebefore element", el)
            })

            // remote 验证验证完成触发
            $(document).on("onremoteafter", function (e, el, v) {
                console.log("onremoteafter value:", v)
            })



        });
    </script>


</body>

</html>